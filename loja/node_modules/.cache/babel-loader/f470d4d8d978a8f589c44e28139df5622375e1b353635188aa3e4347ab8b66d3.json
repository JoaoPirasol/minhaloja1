{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Notemaster08\\\\Documents\\\\GitHub\\\\minhaloja\\\\loja\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Cart from \"./componentes/Cart\";\nimport Products from \"./componentes/Products\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function api(url, method, body = undefined) {\n  return await fetch(`http://localhost:4000/${url}`, {\n    body: body !== undefined ? JSON.stringify(body) : body,\n    method: method,\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => res.json());\n}\nasync function apiGetProducts() {\n  const data = await api(\"products\", \"GET\");\n  return data.products;\n}\nasync function apiSubmitCart(products) {\n  await api(\"purchases\", \"POST\", {\n    products\n  });\n}\nfunction App() {\n  _s();\n  const [productsLoading, setProductsLoading] = useState(false);\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [cartLoading, setCartLoading] = useState(false);\n  async function getProducts() {\n    setProductsLoading(true);\n    setProducts(await apiGetProducts());\n    setProductsLoading(false);\n  }\n  async function submitCart() {\n    setCartLoading(true);\n    await apiSubmitCart(cart);\n    setCart([]);\n    setCartLoading(false);\n    getProducts();\n  }\n  function setProduct(product, change) {\n    const products = cart.filter(({\n      id\n    }) => {\n      return id !== product.id;\n    });\n    product.units += change;\n    if (product.units > 0) {\n      setCart(() => [...products, product]);\n    } else {\n      setCart(() => [...products]);\n      setProducts(LastProducts => [...LastProducts, product]);\n    }\n  }\n  function addProduct(product) {\n    product.units = 1;\n    setCart(() => [...cart, product]);\n    setProducts(() => products.filter(({\n      id\n    }) => {\n      return id !== product.id;\n    }));\n  }\n  useEffect(() => {\n    getProducts();\n  }, []);\n  const SMain = styled.main`\n    width: 100%;\n    height: 100vh;\n    display: grid;\n    grid-template-columns: 300px 1fr;\n    grid-template-rows: 1fr;\n  `;\n  return /*#__PURE__*/_jsxDEV(SMain, {\n    children: [/*#__PURE__*/_jsxDEV(Cart, {\n      products: cart,\n      onChange: setProduct,\n      onClick: submitCart,\n      isLoading: cartLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Products, {\n      products: products,\n      onClick: addProduct,\n      isLoading: productsLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"nehS062BPIuO3FX/i7q/SMPyPTE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","styled","Cart","Products","jsxDEV","_jsxDEV","api","url","method","body","undefined","fetch","JSON","stringify","headers","Accept","then","res","json","apiGetProducts","data","products","apiSubmitCart","App","_s","productsLoading","setProductsLoading","setProducts","cart","setCart","cartLoading","setCartLoading","getProducts","submitCart","setProduct","product","change","filter","id","units","LastProducts","addProduct","SMain","main","children","onChange","onClick","isLoading","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Notemaster08/Documents/GitHub/minhaloja/loja/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Cart from \"./componentes/Cart\";\nimport Products from \"./componentes/Products\";\n\nasync function api(url, method, body = undefined) {\n  return await fetch(`http://localhost:4000/${url}`, {\n    body: body !== undefined ? JSON.stringify(body) : body,\n    method: method,\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n  }).then((res) => res.json());\n}\n\nasync function apiGetProducts() {\n  const data = await api(\"products\", \"GET\");\n  return data.products;\n}\n\nasync function apiSubmitCart(products) {\n  await api(\"purchases\", \"POST\", { products });\n}\n\nfunction App() {\n  const [productsLoading, setProductsLoading] = useState(false);\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [cartLoading, setCartLoading] = useState(false);\n\n  async function getProducts() {\n    setProductsLoading(true);\n    setProducts(await apiGetProducts());\n    setProductsLoading(false);\n  }\n\n  async function submitCart() {\n    setCartLoading(true);\n    await apiSubmitCart(cart);\n    setCart([]);\n    setCartLoading(false);\n\n    getProducts();\n  }\n\n  function setProduct(product, change) {\n    const products = cart.filter(({ id }) => {\n      return id !== product.id;\n    });\n\n    product.units += change;\n\n    if (product.units > 0) {\n      setCart(() => [...products, product]);\n    } else {\n      setCart(() => [...products]);\n      setProducts((LastProducts) => [...LastProducts, product]);\n    }\n  }\n\n  function addProduct(product) {\n    product.units = 1;\n    setCart(() => [...cart, product]);\n    setProducts(() =>\n      products.filter(({ id }) => {\n        return id !== product.id;\n      })\n    );\n  }\n\n  useEffect(() => {\n    getProducts();\n  }, []);\n\n  const SMain = styled.main`\n    width: 100%;\n    height: 100vh;\n    display: grid;\n    grid-template-columns: 300px 1fr;\n    grid-template-rows: 1fr;\n  `;\n\n  return (\n    <SMain>\n      <Cart\n        products={cart}\n        onChange={setProduct}\n        onClick={submitCart}\n        isLoading={cartLoading}\n      />\n      <Products\n        products={products}\n        onClick={addProduct}\n        isLoading={productsLoading}\n      />\n    </SMain>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}